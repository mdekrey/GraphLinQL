scenario: Union List Execution
tests:
  - name: Search list results
    given:
      query: |
        {
          search(text: "Luke") {
            name
          }
        }
    when:
      execute: true
    then:
      match-result: |
        {
            "data": {
                "search": [{
                    "name": "Luke Skywalker"
                }]
            }
        }
        
  - name: Search list results with multiple matches
    given:
      query: |
        {
          search(text: "L") {
            name
          }
        }
    when:
      execute: true
    then:
      match-result: |
        {
            "data": {
                "search": [{
                    "name": "Luke Skywalker"
                }, {
                    "name": "Leia Organa"
                }]
            }
        }
        
  - name: Search list results with multiple types
    given:
      query: |
        {
          search(text: "D") {
            __typename
            name
          }
        }
    when:
      execute: true
    then:
      match-result: |
        {
            "data": {
                "search": [{
                    "__typename": "Human",
                    "name": "Darth Vader"
                }, {
                    "__typename": "Droid",
                    "name": "R2-D2"
                }]
            }
        }
        
  - name: Search list results with multiple types and fragments
    given:
      query: |
        {
          search(text: "D") {
            name
            ... on Droid {
              primaryFunction
            }
            ... on Human {
              mass
            }
          }
        }
    when:
      execute: true
    then:
      match-result: |
        {
            "data": {
                "search": [{
                    "name": "Darth Vader",
                    "mass": 136
                }, {
                    "name": "R2-D2",
                    "primaryFunction": "Astromech"
                }]
            }
        }
        